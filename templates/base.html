{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>NeoCart</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="icon" href="{% static 'images/favicon.ico' %}">
    <style>
  .neocart-logo {
    height: 58px;      
    width: 60;
  }
</style>
</head>
<body>

<nav class="navbar navbar-dark bg-dark sticky-top">
  <div class="container-fluid px-4 d-flex align-items-center">

    <!-- LEFT: LOGO -->
    <a class="navbar-brand me-4" href="/">
      <img src="{% static 'images/neocart_logo.png' %}"
           alt="NeoCart"
           style="height:42px;">
    </a>

    <!-- CENTER: SEARCH BAR -->
    <form method="get"
          action="/"
          class="d-flex flex-grow-1 align-items-center mx-3">

      <select name="category"
              class="form-select me-2"
        style="max-width:160px;"
        onchange="this.form.submit()">

  <option value="">All Category</option>

  {% for cat in categories %}
    <option value="{{ cat.id }}"
      {% if request.GET.category == cat.id|stringformat:"s" %}
        selected
      {% endif %}>
      {{ cat.name }}
    </option>
  {% endfor %}
      </select>

      <input type="text"
             name="q"
             class="form-control me-2"
             placeholder="Search products..."
             value="{{ request.GET.q }}">

      <button class="btn btn-warning px-3">
        ğŸ”
      </button>
    </form>

    <!-- RIGHT: USER ACTIONS -->
    <div class="d-flex align-items-center gap-2">

      {% if user.is_authenticated %}
        <span class="text-white me-2">
          Hello, {{ user.first_name }} ğŸ‘‹
        </span>

        <a href="{% url 'my_account' %}"
           class="btn btn-outline-light btn-sm">
          My Account
        </a>

        <a href="{% url 'view_cart' %}"
           class="btn btn-info btn-sm position-relative">
          My Cart
          {% if cart_count > 0 %}
            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
              {{ cart_count }}
            </span>
          {% endif %}
        </a>

        <a href="{% url 'logout' %}"
           class="btn btn-warning btn-sm">
          Logout
        </a>

      {% else %}
        <a href="{% url 'login' %}" class="btn btn-success btn-sm">Login</a>
        <a href="{% url 'register' %}" class="btn btn-primary btn-sm">Register</a>
      {% endif %}

    </div>

  </div>
</nav>

<div class="container mt-4">
    {% block content %}{% endblock %}
</div>

</body>
</html>
